//@version=5
indicator(shorttitle="Futrend/WVAX", title="Williams Value", overlay=false, precision=0)

//---------------------------------------------------------
// üß≠ Z√ÅKLADN√ç NASTAVEN√ç
//---------------------------------------------------------
Tydnu = input.int(26, title="Poƒçet t√Ωdn≈Ø pro v√Ωpoƒçet (okno)")

// Urƒçen√≠ ƒçasov√©ho r√°mce a n√°sobku
isdaily = timeframe.isdaily
timef = isdaily ? "D" : "W"
nasobek = isdaily ? (timef == "D" ? 5 : 1) : 1

//---------------------------------------------------------
// üìä NAƒåTEN√ç EXTERN√çCH DAT
//  - DX1! = dolarov√Ω index
//  - GC1! = zlato (Gold Futures)
//  - ZB1! = americk√© st√°tn√≠ dluhopisy (30Y Bond Futures)
//---------------------------------------------------------
delitelD = request.security("DX1!", timef, close)
delitelG = request.security("GC1!", timef, close)
delitelT = request.security("ZB1!", timef, close)

//---------------------------------------------------------
// üü° ZLATO
// Vyjad≈ôuje relativn√≠ s√≠lu sledovan√©ho instrumentu v≈Øƒçi zlatu
//---------------------------------------------------------
PaI2G = ta.sma(close / delitelG * 100, 2 * nasobek)
PaI22G = ta.sma(close / delitelG * 100, 22 * nasobek)
PaI222G = PaI2G - PaI22G
PaIHighG = ta.highest(PaI222G, Tydnu * nasobek)
PaILowG = ta.lowest(PaI222G, Tydnu * nasobek)
PaI1G = PaIHighG == PaILowG ? 1 : (PaI222G - PaILowG) / (PaIHighG - PaILowG) * 100
PaIG = PaI1G < 0 ? 0 : PaI1G
plot(PaIG, color=color.new(color.gold, 0), linewidth=2, title="Zlato")

//---------------------------------------------------------
// üíµ DOLAR
// Vyjad≈ôuje s√≠lu instrumentu v≈Øƒçi dolarov√©mu indexu
//---------------------------------------------------------
PaI2D = ta.sma(close / delitelD * 100, 2 * nasobek)
PaI22D = ta.sma(close / delitelD * 100, 22 * nasobek)
PaI222D = PaI2D - PaI22D
PaIHighD = ta.highest(PaI222D, Tydnu * nasobek)
PaILowD = ta.lowest(PaI222D, Tydnu * nasobek)
PaI1D = PaIHighD == PaILowD ? 1 : (PaI222D - PaILowD) / (PaIHighD - PaILowD) * 100
PaID = PaI1D < 0 ? 0 : PaI1D
plot(PaID, color=color.new(color.blue, 0), linewidth=1, title="Dolar")

//---------------------------------------------------------
// üü• BONDY
// Vyjad≈ôuje s√≠lu instrumentu v≈Øƒçi dlouhodob√Ωm st√°tn√≠m dluhopis≈Øm
//---------------------------------------------------------
PaI2T = ta.sma(close / delitelT * 100, 2 * nasobek)
PaI22T = ta.sma(close / delitelT * 100, 22 * nasobek)
PaI222T = PaI2T - PaI22T
PaIHighT = ta.highest(PaI222T, Tydnu * nasobek)
PaILowT = ta.lowest(PaI222T, Tydnu * nasobek)
PaI1T = PaIHighT == PaILowT ? 1 : (PaI222T - PaILowT) / (PaIHighT - PaILowT) * 100
PaIT = PaI1T < 0 ? 0 : PaI1T
plot(PaIT, color=color.new(color.red, 0), linewidth=1, title="Bondy")

//---------------------------------------------------------
// üìà EXTR√âMN√ç OBLASTI
//  - Hodnoty nad 75 = horn√≠ extr√©m (p≈ôekoupeno)
//  - Hodnoty pod 20 = doln√≠ extr√©m (p≈ôeprodan√©)
//---------------------------------------------------------
bandLow = hline(20, color=color.new(color.gray, 50), linestyle=hline.style_solid, title="Doln√≠ extr√©m")
bandHigh = hline(75, color=color.new(color.gray, 50), linestyle=hline.style_solid, title="Horn√≠ extr√©m")
fill(bandLow, bandHigh, color=color.new(color.silver, 90), title="Pozad√≠")

//---------------------------------------------------------
// ‚ÑπÔ∏è LEGENDA / INTERPRETACE
//---------------------------------------------------------
// Tento indik√°tor sleduje relativn√≠ v√Ωkonnost aktu√°ln√≠ho instrumentu
// v≈Øƒçi t≈ôem hlavn√≠m makro benchmark≈Øm:
//  - Zlato (≈ælut√° k≈ôivka): ukazuje s√≠lu nebo slabost v≈Øƒçi zlatu
//  - Dolar (modr√° k≈ôivka): ukazuje vztah v≈Øƒçi USD indexu (mƒõnov√Ω vliv)
//  - Bondy (ƒçerven√° k≈ôivka): vztah v≈Øƒçi dluhopis≈Øm (√∫rokov√© prost≈ôed√≠)
//
// Oblasti:
//  - Nad 75: instrument je ‚Äûp≈ôekoupen√Ω‚Äú ‚Üí mo≈æn√© zpomalen√≠ r≈Østu
//  - Pod 20: instrument je ‚Äûp≈ôeprodan√Ω‚Äú ‚Üí mo≈æn√© o≈æiven√≠
//
// Praktick√© pou≈æit√≠:
//  Sleduj konfluence ‚Äì nap≈ô. kdy≈æ v≈°echny t≈ôi k≈ôivky klesaj√≠ pod 20,
//  m≈Ø≈æe to naznaƒçovat ≈°irokou slabost. Naopak, kdy≈æ v≈°echny rostou
//  nad 75, m≈Ø≈æe j√≠t o p≈ôekoupenou f√°zi trhu.
//---------------------------------------------------------